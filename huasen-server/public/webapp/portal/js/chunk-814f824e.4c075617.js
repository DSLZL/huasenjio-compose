(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-814f824e","chunk-bf0c867a"],{"0196":function(t,e,i){},"1cae":function(t,e,i){"use strict";i("0196")},"2c51":function(t,e,i){},"5aac":function(t,e,i){"use strict";i.r(e);var s=i("2f62"),a=i("dabc"),l=i("af63"),n=i("488d"),r={name:"SiteDetail",mixins:[i("e457").a],components:{HsDialog:l.a,Markdown:n.a},props:{site:{type:Object,default:()=>({})}},data:()=>({width:768,height:500}),computed:{...Object(s.e)(["user","appConfig"]),detail(){return this.site.detail||""},tags(){let t=[],e=this.LODASH.get(this.site,"expand","{}");try{const i=JSON.parse(e);t=this.LODASH.get(i,"tag",[]).map(t=>"# "+t)}catch(t){console.error("站点解析异常：",this.site)}return t},timePrefix(){const t=this.LODASH.get(this.site,"createTime",""),e=this.LODASH.get(this.site,"updateTime","");if(!t&&!e)return"n年前发布";let i="",s=t===e?"发布":"更新";const l=t||e,n=Object(a.c)(),r=n.diff(l,"days");return i=r<1?n.diff(l,"hours")+"小时前":r<7?r+"天前":r<30?Math.floor(r/7)+"周前":r<365?Math.floor(r/30)+"月前":Math.floor(r/365)+"年前",`${i}${s}`}},methods:{handleComfirm(){this.TOOL.openPage(this.site.url)},_resizeHook(){document.body.clientWidth<=this.CONSTANT.appMinWidth?this.width=this.CONSTANT.appMinWidth:this.width=document.body.clientWidth<768?document.body.clientWidth-8:768,document.body.clientHeight<=this.CONSTANT.appMinHeight?this.height=this.CONSTANT.appMinHeight:this.height=document.body.clientHeight<500?document.body.clientHeight-8:500}}},o=(i("1cae"),i("2877")),c=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HsDialog",t._g(t._b({staticClass:"site__detail-dialog",attrs:{title:t.site.name+"详情页","close-on-click-modal":!1,width:t.width,height:t.height,showMax:!0,buttons:{comfirm:"立即跳转"}},on:{comfirmDialog:t.handleComfirm}},"HsDialog",t.$attrs,!1),t.$listeners),[i("div",{staticClass:"site__content relative"},[i("div",{staticClass:"info absolute -left-px-0 -top-px-22 flex items-center text-gray-400"},[i("div",{staticClass:"time"},[i("i",{staticClass:"el-icon-time mr-px-2"}),t._v(t._s(t.timePrefix))]),i("div",{staticClass:"view ml-px-10"},[i("i",{staticClass:"el-icon-view mr-px-2"}),t._v(t._s(t.site.pv))])]),t.site.description||t.tags.length?i("div",{staticClass:"site__head border border-gray-300 border-dashed"},[t.site.description?i("div",{staticClass:"description"},[t._v(t._s(t.site.description))]):t._e(),t.tags.length?i("div",{staticClass:"tag -ml-px-8"},t._l(t.tags,(function(e){return i("div",{directives:[{name:"randomColor",rawName:"v-randomColor"}],key:e,staticClass:"text-white inline-block text-xs px-px-8 py-px-2 ml-px-8 rounded-full"},[t._v(" "+t._s(e)+" ")])})),0):t._e()]):t._e(),i("div",{staticClass:"detail__markdown"},[t.detail?i("Markdown",{attrs:{value:t.detail,showFooter:!1}}):i("el-empty",{staticStyle:{height:"100%"},attrs:{"image-size":140,description:"暂无数据"}})],1)])])}),[],!1,null,null,null);e.default=c.exports},"9bd2":function(t,e,i){"use strict";i.r(e);var s=i("2f62"),a=i("dabc"),l={name:"HomeSite",components:{SiteDetail:i("5aac").default},data:()=>({showDetail:!1,currentSite:null,pinMap:{1:{label:"热",color:"var(--danger)"},2:{label:"墙",color:"var(--warning)"},3:{label:"优",color:"var(--success)"},4:{label:"免",color:"var(--primary)"}}}),computed:{...Object(s.e)(["appConfig","categorySites"]),categorySitesData(){let t=this.LODASH.cloneDeep(this.categorySites)||[];return t.forEach(t=>{t.selectedTag="",t.allTags=this.handleCategoryAllTag(t)}),t}},mounted(){this.$store.dispatch("initLocalThemeInfo")},methods:{showTag(t){return this.LODASH.get(this.appConfig,"site.openLabelClassification")&&0!==t.allTags.length},imgUrl:t=>t.icon,handleSelectTag(t,e){t.selectedTag=t.selectedTag===e?"":e,this.$forceUpdate()},handleDisplaySites:t=>t.selectedTag?t.sites.filter(e=>e.tags&&e.tags.includes(t.selectedTag)):t.sites,handleCategoryAllTag(t){let e=[];return(this.LODASH.get(t,"sites")||[]).forEach(t=>{let i=a.i.parseJSON(t.expand,"Object",{}),s=this.LODASH.get(i,"tag");Array.isArray(s)&&(t.tags=s,e=e.concat(s))}),e=Array.from(new Set(e)),e},handlePin(t){let e=[];try{e=JSON.parse(t.expand).pin.slice(0,6)}catch(t){e=[]}return e},goSite(t){window.open(t.url,"_blank")},openDetail(t){this.API.Site.findSiteDetail({_id:t._id},{notify:!1}).then(t=>{this.currentSite=t.data,this.$nextTick(()=>{this.showDetail=!0})}).catch(t=>{})},closeDetail(){this.showDetail=!1,this.$nextTick(()=>{this.currentSite=null})}}},n=(i("cdd1"),i("2877")),r=Object(n.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"discolor",rawName:"v-discolor"}],staticClass:"home-site",attrs:{id:"js-home-site"}},[t._l(t.categorySitesData,(function(e,s){return i("section",{key:e.typeName+"-"+s,attrs:{id:"site-anchor-"+encodeURI(s)}},[i("div",{directives:[{name:"discolor",rawName:"v-discolor"}],staticClass:"site-item"},[i("header",[i("i",{staticClass:"category-icon relative left-px-2 iconfont icon-tag"}),i("a",{staticClass:"category-title",attrs:{name:e.typeName}},[t._v(t._s(e.typeName))]),t.showTag(e)?i("div",{staticClass:"w-full pb-px-4 my-px-4 overflow-x-auto overflow-y-hidden"},[i("div",{staticClass:"inherit-bg tag-container flex items-center p-px-4 bg-gray-100 rounded-full"},[i("div",{staticClass:"inherit-bg flex-shrink-0 text-12px text text-center w-px-80 px-px-2 py-px-4 ml-px-6 first:ml-px-0 hover:bg-blue-400 hover:text-white transition rounded-full pointer",class:{selected:""===e.selectedTag},attrs:{title:"全部"},on:{click:function(i){return t.handleSelectTag(e,"")}}},[t._v(" 全部 ")]),t._l(e.allTags,(function(s){return i("div",{key:s,staticClass:"inherit-bg flex-shrink-0 text-12px text text-center w-px-80 px-px-2 py-px-4 ml-px-6 first:ml-px-0 hover:bg-blue-400 hover:text-white transition rounded-full pointer",class:{selected:e.selectedTag===s},attrs:{title:s},on:{click:function(i){return t.handleSelectTag(e,s)}}},[t._v(" "+t._s(s)+" ")])}))],2)]):t._e()]),i("main",[i("ul",{directives:[{name:"balance",rawName:"v-balance"}]},t._l(t.handleDisplaySites(e),(function(e,s){return i("div",{key:e.url+"-"+s,staticClass:"site relative inherit-text",on:{click:function(i){return t.openDetail(e)}}},[i("div",{staticClass:"pin-group absolute -top-px-6 right-px-0 w-full h-px-16 flex justify-end"},t._l(t.handlePin(e),(function(e,s){return i("div",{key:e+"-"+s,staticClass:"w-px-16 h-px-16 mr-px-2 text-12px text-gray-0 flex justify-center items-center rounded-full",style:{backgroundColor:t.LODASH.get(t.pinMap,e+".color")}},[t.LODASH.get(t.pinMap,e)?[t._v(" "+t._s(t.LODASH.get(t.pinMap,e+".label"))+" ")]:t._e()],2)})),0),i("div",{staticClass:"site-card inherit-text text w-px-180 sm:w-px-150"},[i("div",{staticClass:"img-group"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{siteUrl:e.url,iconPatch:t.appConfig.site.autoIconPatch},expression:"{ siteUrl: site.url, iconPatch: appConfig.site.autoIconPatch }"}],attrs:{src:t.imgUrl(e)}}),i("div",{staticClass:"direct",attrs:{title:"直达站点"},on:{click:function(i){return i.stopPropagation(),t.goSite(e)}}},[i("i",{staticClass:"iconfont icon-xiangyou"})])]),i("div",{staticClass:"text-group"},[i("div",{staticClass:"name text",attrs:{title:e.name}},[t._v(t._s(e.name))]),i("div",{staticClass:"describe inherit-text text",attrs:{title:e.description}},[t._v(t._s(e.description))])])])])})),0)])])])})),t.showDetail?i("SiteDetail",{attrs:{visible:t.showDetail,site:t.currentSite,"append-to-body":!0},on:{"update:visible":function(e){t.showDetail=e},close:t.closeDetail}}):t._e()],2)}),[],!1,null,"4968f932",null);e.default=r.exports},cdd1:function(t,e,i){"use strict";i("2c51")}}]);
//# sourceMappingURL=chunk-814f824e.4c075617.js.map